"use strict";(self.webpackChunkdesafio_final_front=self.webpackChunkdesafio_final_front||[]).push([[893],{8893:(q,m,s)=>{s.r(m),s.d(m,{PrivateAppModule:()=>b});var d=s(6895),a=s(6773),t=s(8256);let h=(()=>{class r{constructor(e){this.router=e}ngOnInit(){}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(a.F0))},r.\u0275cmp=t.Xpm({type:r,selectors:[["front-cart-page"]],decls:3,vars:0,consts:[[1,"container","mt-5"]],template:function(e,n){1&e&&(t.TgZ(0,"section",0)(1,"h3"),t._uU(2,"Carrito"),t.qZA()())}}),r})();var l=s(6221),u=s(4766),f=s(529);let p=(()=>{class r{constructor(e){this.http=e}getProducts(){return this.http.get(`${u.N.urlFetch}/products/completelist`)}deleteProduct(e){return this.http.delete(`${u.N.urlFetch}/products/delete/${e}`)}addProduct(e){return this.http.post(`${u.N.urlFetch}/products/insert`,e)}updateProduct(e,n){return this.http.put(`${u.N.urlFetch}/products/update/${e}`,n)}}return r.\u0275fac=function(e){return new(e||r)(t.LFG(f.eN))},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var g=s(7316),o=s(433);let P=(()=>{class r{constructor(e){this.http=e}getProductsOnCartById(){return this.http.get(`${u.N.urlFetch}/api/carrito/1/productos`)}addProductsOnCartByMail(e,n){return this.http.post(`${u.N.urlFetch}/cart/${e}`,n)}}return r.\u0275fac=function(e){return new(e||r)(t.LFG(f.eN))},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();function _(r,c){if(1&r&&(t.TgZ(0,"div")(1,"form",9)(2,"label",10),t._uU(3," Producto: "),t._UZ(4,"input",11),t.qZA(),t.TgZ(5,"label",10),t._uU(6,"description: "),t._UZ(7,"input",12),t.qZA(),t.TgZ(8,"label",10),t._uU(9," C\xf3digo del produto: "),t._UZ(10,"input",13),t.qZA(),t.TgZ(11,"label",10),t._uU(12," URL del producto: "),t._UZ(13,"input",14),t.qZA(),t.TgZ(14,"label",10),t._uU(15," Precio: "),t._UZ(16,"input",15),t.qZA(),t.TgZ(17,"label",10),t._uU(18," Stock: "),t._UZ(19,"input",16),t.qZA()()()),2&r){const e=t.oxw();t.xp6(1),t.Q6J("formGroup",e.formProduct)}}function C(r,c){if(1&r){const e=t.EpF();t.TgZ(0,"div",2)(1,"button",17),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.addToCart())}),t._uU(2,"Agregar al carrito"),t.qZA()()}}function v(r,c){if(1&r){const e=t.EpF();t.TgZ(0,"div",2)(1,"button",18),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.deleteProduct())}),t._uU(2,"Eliminar"),t.qZA(),t.TgZ(3,"button",17),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.updateProduct())}),t._uU(4,"Actualizar"),t.qZA()()}}let Z=(()=>{class r{constructor(e,n,i){this.dataProductsSvs=e,this.authService=n,this.cartService=i,this.changeList=new t.vpe,this.userRole="user",this.userEmail="",this.formProduct=new o.cw({}),this.administrador=!1}ngOnInit(){this.formProduct=new o.cw({product:new o.NI(this.infoProduct.product,[o.kI.required]),description:new o.NI(this.infoProduct.description,[o.kI.required]),code:new o.NI(this.infoProduct.code,[o.kI.required]),urlImgProduct:new o.NI(this.infoProduct.urlImgProduct,[o.kI.required]),price:new o.NI(this.infoProduct.price,[o.kI.required]),stock:new o.NI(this.infoProduct.stock,[o.kI.required])}),this.authService.getCookie().subscribe({next:e=>{this.userRole=e.message.role,this.userEmail=e.message.email,"admin"==this.userRole&&(this.administrador=!0)},error:e=>console.log(e)})}deleteProduct(){confirm(`\xbfRealmente quer\xe9s borrar el producto: ${this.infoProduct.product}`)&&(this.dataProductsSvs.deleteProduct(this.infoProduct.code).subscribe({next:()=>this.changeList.emit(),error:n=>console.log(n)}),this.changeList.emit())}updateProduct(){this.formProduct.get("product")?.errors?.required||this.formProduct.get("description")?.errors?.required||this.formProduct.get("code")?.errors?.required||this.formProduct.get("urlImgProduct")?.errors?.required||this.formProduct.get("price")?.errors?.required||this.formProduct.get("stock")?.errors?.required?alert("Todos los campos deben estar completos"):this.dataProductsSvs.updateProduct(this.infoProduct.code,this.formProduct.value).subscribe({next:()=>this.changeList.emit(),error:e=>console.log(e)})}addToCart(){this.cartService.addProductsOnCartByMail(this.userEmail,this.infoProduct).subscribe({next:e=>console.log(e),error:e=>console.log(e),complete:()=>{}})}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(p),t.Y36(l.e),t.Y36(P))},r.\u0275cmp=t.Xpm({type:r,selectors:[["front-card"]],inputs:{infoProduct:"infoProduct"},outputs:{changeList:"changeList"},decls:15,vars:8,consts:[[1,"card","m-3",2,"width","15rem"],[1,"card-img-top",2,"max-height","150px!important","min-height","150px!important",3,"src"],[1,"card-body"],[1,"card-title"],[1,"card-text"],[1,"list-group","list-group-flush"],[1,"list-group-item"],[4,"ngIf"],["class","card-body",4,"ngIf"],["action","",1,"container","d-flex","flex-column",3,"formGroup"],["for",""],["formControlName","product","placeholder","Nombre del producto","type","text"],["formControlName","description","placeholder","descricti\xf3n del producto","type","text"],["formControlName","code","placeholder","C\xf3digo del producto","type","number","readonly",""],["formControlName","urlImgProduct","placeholder","URL de la foto","type","text"],["formControlName","price","placeholder","Precio","type","number"],["formControlName","stock","placeholder","Stock","type","number"],[1,"btn","btn-warning","ms-3",3,"click"],[1,"btn","btn-danger",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"img",1),t.TgZ(2,"div",2)(3,"h5",3),t._uU(4),t.qZA(),t.TgZ(5,"p",4),t._uU(6),t.qZA()(),t.TgZ(7,"ul",5)(8,"li",6),t._uU(9),t.qZA(),t.TgZ(10,"li",6),t._uU(11),t.qZA()(),t.YNc(12,_,20,1,"div",7),t.YNc(13,C,3,0,"div",8),t.YNc(14,v,5,0,"div",8),t.qZA()),2&e&&(t.xp6(1),t.s9C("src",n.infoProduct.urlImgProduct,t.LSH),t.xp6(3),t.Oqu(n.infoProduct.product),t.xp6(2),t.Oqu(n.infoProduct.description),t.xp6(3),t.hij("Precio: U$S ",n.infoProduct.price,""),t.xp6(2),t.hij("Stock: ",n.infoProduct.stock,""),t.xp6(1),t.Q6J("ngIf",n.administrador),t.xp6(1),t.Q6J("ngIf",!n.administrador),t.xp6(1),t.Q6J("ngIf",n.administrador))},dependencies:[o._Y,o.Fj,o.wV,o.JJ,o.JL,o.sg,o.u,d.O5],styles:["input[_ngcontent-%COMP%]{border-radius:5px;margin-top:3px}"]}),r})(),I=(()=>{class r{constructor(e,n){this.authsvc=e,this.productsvc=n,this.formProduct=new o.cw({}),this.changeList=new t.vpe}ngOnInit(){this.formProduct=new o.cw({product:new o.NI("",[o.kI.required]),description:new o.NI("",[o.kI.required]),code:new o.NI("",[o.kI.required]),urlImgProduct:new o.NI("",[o.kI.required]),price:new o.NI("",[o.kI.required]),stock:new o.NI("",[o.kI.required])})}addproduct(){this.formProduct.get("product")?.errors?.required||this.formProduct.get("description")?.errors?.required||this.formProduct.get("code")?.errors?.required||this.formProduct.get("urlImgProduct")?.errors?.required||this.formProduct.get("price")?.errors?.required||this.formProduct.get("stock")?.errors?.required?alert("Todos los campos deben estar completos"):this.productsvc.addProduct(this.formProduct.value).subscribe({next:e=>{0==e.status?(alert(`Producto a\xf1adido correctamente con el id: ${e.message._id}`),this.changeList.emit()):alert(`${e.message}`)},error:e=>console.log(e)})}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(l.e),t.Y36(p))},r.\u0275cmp=t.Xpm({type:r,selectors:[["front-form"]],outputs:{changeList:"changeList"},decls:8,vars:1,consts:[["action","",1,"d-flex","flex-column",3,"formGroup"],["formControlName","product","placeholder","Nombre del producto","type","text"],["formControlName","description","placeholder","descricti\xf3n del producto","type","text"],["formControlName","code","placeholder","C\xf3digo del producto","type","number"],["formControlName","urlImgProduct","placeholder","URL de la foto","type","text"],["formControlName","price","placeholder","Precio","type","number"],["formControlName","stock","placeholder","Stock","type","number"],["type","submit","value","Ingresar producto",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"form",0),t._UZ(1,"input",1)(2,"input",2)(3,"input",3)(4,"input",4)(5,"input",5)(6,"input",6),t.TgZ(7,"input",7),t.NdJ("click",function(){return n.addproduct()}),t.qZA()()),2&e&&t.Q6J("formGroup",n.formProduct)},dependencies:[o._Y,o.Fj,o.wV,o.JJ,o.JL,o.sg,o.u],styles:["input[_ngcontent-%COMP%]{margin-top:4px;border-radius:5px}"]}),r})();function N(r,c){if(1&r){const e=t.EpF();t.TgZ(0,"front-form",10),t.NdJ("changeList",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.callBakcend())}),t.qZA()}}function F(r,c){if(1&r){const e=t.EpF();t.TgZ(0,"front-card",11),t.NdJ("changeList",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.callBakcend())}),t.qZA()}2&r&&t.Q6J("infoProduct",c.$implicit)}const T=[{path:"",component:(()=>{class r{constructor(e,n,i,k){this.authService=e,this.router=n,this.productsServices=i,this.authGuard=k,this.showFormAdmin=!1,this.allproducts=[]}ngOnInit(){this.authService.getCookie().subscribe({next:e=>{this.userName=e.message.completeName,this.userImg=e.message.userImg,this.userRole=e.message.role,"admin"==this.userRole&&(this.showFormAdmin=!0)},error:e=>console.log(e)}),this.callBakcend()}callBakcend(){this.productsServices.getProducts().subscribe({next:e=>{this.allproducts=e.message},error:e=>console.log(e)})}close(){this.authService.deleteCookie().subscribe({next:e=>console.log(e),error:e=>console.log(e)}),this.router.navigate(["auth/login"])}goToCart(){this.router.navigate(["home","carrito"])}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(l.e),t.Y36(a.F0),t.Y36(p),t.Y36(g.a))},r.\u0275cmp=t.Xpm({type:r,selectors:[["front-home-page"]],decls:14,vars:4,consts:[[1,"container","mt-5"],[1,"container","d-flex","mb-3"],[1,"card",2,"width","18rem"],["alt","...",1,"card-img-top",3,"src"],[1,"card-body"],[1,"card-title"],["href","#",1,"btn","btn-primary",3,"click"],[3,"changeList",4,"ngIf"],[1,"d-flex","flex-row","flex-wrap"],[3,"infoProduct","changeList",4,"ngFor","ngForOf"],[3,"changeList"],[3,"infoProduct","changeList"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._UZ(3,"img",3),t.TgZ(4,"div",4)(5,"h5",5),t._uU(6),t.qZA(),t.TgZ(7,"a",6),t.NdJ("click",function(){return n.close()}),t._uU(8,"Cerrrar sesi\xf3n"),t.qZA(),t.TgZ(9,"a",6),t.NdJ("click",function(){return n.goToCart()}),t._uU(10,"Ir al carrito"),t.qZA()()()(),t.YNc(11,N,1,0,"front-form",7),t.TgZ(12,"div",8),t.YNc(13,F,1,1,"front-card",9),t.qZA()()),2&e&&(t.xp6(3),t.s9C("src",n.userImg,t.LSH),t.xp6(3),t.hij("Bienvenido ",n.userName,""),t.xp6(5),t.Q6J("ngIf",n.showFormAdmin),t.xp6(2),t.Q6J("ngForOf",n.allproducts))},dependencies:[d.sg,d.O5,Z,I]}),r})()},{path:"carrito",component:h}];let x=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[a.Bz.forChild(T),a.Bz]}),r})(),b=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[o.UX,d.ez,x]}),r})()}}]);