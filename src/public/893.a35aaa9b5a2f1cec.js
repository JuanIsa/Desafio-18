"use strict";(self.webpackChunkdesafio_final_front=self.webpackChunkdesafio_final_front||[]).push([[893],{8893:(A,m,s)=>{s.r(m),s.d(m,{PrivateAppModule:()=>N});var d=s(6895),a=s(6773),t=s(8256),u=s(4766),g=s(529);let f=(()=>{class o{constructor(e){this.http=e}getProductsOnCartById(){return this.http.get(`${u.N.urlFetch}/api/carrito/1/productos`)}addProductsOnCartById(e){return this.http.post(`${u.N.urlFetch}/api/carrito/1/productos`,e)}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(g.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),l=(()=>{class o{constructor(e){this.http=e}getProducts(){return this.http.get(`${u.N.urlFetch}/products/completelist`)}deleteProduct(e){return this.http.delete(`${u.N.urlFetch}/products/delete/${e}`)}addProduct(e){return this.http.post(`${u.N.urlFetch}/products/insert`,e)}updateProduct(e,r){return this.http.put(`${u.N.urlFetch}/products/update/${e}`,r)}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(g.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function h(o,n){if(1&o&&(t.TgZ(0,"div",6)(1,"div",7),t._uU(2),t.qZA(),t.TgZ(3,"div",8)(4,"blockquote",9)(5,"p"),t._uU(6),t.qZA(),t.TgZ(7,"footer",10),t._uU(8),t.TgZ(9,"cite",11),t._uU(10),t.qZA()()()()()),2&o){const e=n.$implicit;t.xp6(2),t.hij(" ",e.nombre," "),t.xp6(4),t.Oqu(e.descripcion),t.xp6(2),t.hij("Stock: ",e.stock," "),t.xp6(2),t.hij("Precio: ",e.precio,"")}}function _(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"li",12),t._uU(1),t.TgZ(2,"button",13),t.NdJ("click",function(){const q=t.CHM(e).$implicit,y=t.oxw();return t.KtG(y.addtocart(q.id))}),t._uU(3,"Agregar al carro"),t.qZA()()}if(2&o){const e=n.$implicit;t.xp6(1),t.hij("",e.nombre," ")}}let P=(()=>{class o{constructor(e,r,i){this.cartSVC=e,this.productsSVC=r,this.router=i,this.cartItems=[],this.listProducts=[]}ngOnInit(){this.cartSVC.getProductsOnCartById().subscribe({next:e=>this.cartItems=e,error:e=>console.log(e)}),this.productsSVC.getProducts().subscribe({next:e=>this.listProducts=e,error:e=>console.log(e)})}goCart(){this.router.navigate(["home"])}addtocart(e){this.productsSVC.getProducts().subscribe({next:r=>{this.cartItems.push(r.find(i=>i.id===e)),this.cartSVC.addProductsOnCartById(r.find(i=>i.id===e)).subscribe({next:i=>console.log(i),error:i=>console.log(i)})},error:r=>console.log(r)})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(f),t.Y36(l),t.Y36(a.F0))},o.\u0275cmp=t.Xpm({type:o,selectors:[["front-cart-page"]],decls:12,vars:2,consts:[[1,"container","mt-5"],["class","card",4,"ngFor","ngForOf"],[1,"btn","btn-danger","my-5",3,"click"],[1,"card",2,"width","30rem"],[1,"list-group","list-group-flush"],["class","list-group-item d-flex justify-content-evenly",4,"ngFor","ngForOf"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"blockquote","mb-0"],[1,"blockquote-footer"],["title","Source Title"],[1,"list-group-item","d-flex","justify-content-evenly"],[1,"btn","btn-primary",3,"click"]],template:function(e,r){1&e&&(t.TgZ(0,"section",0)(1,"h3"),t._uU(2,"Carrito"),t.qZA(),t.YNc(3,h,11,4,"div",1),t.TgZ(4,"button",2),t.NdJ("click",function(){return r.goCart()}),t._uU(5,"Ir al home"),t.qZA()(),t.TgZ(6,"div",0)(7,"h3"),t._uU(8,"Productos disponibles"),t.qZA(),t.TgZ(9,"div",3)(10,"ul",4),t.YNc(11,_,4,1,"li",5),t.qZA()()()),2&e&&(t.xp6(3),t.Q6J("ngForOf",r.cartItems),t.xp6(8),t.Q6J("ngForOf",r.listProducts))},dependencies:[d.sg]}),o})();var p=s(6221),c=s(433);function C(o,n){if(1&o&&(t.TgZ(0,"div")(1,"form",9)(2,"label",10),t._uU(3," Producto: "),t._UZ(4,"input",11),t.qZA(),t.TgZ(5,"label",10),t._uU(6,"description: "),t._UZ(7,"input",12),t.qZA(),t.TgZ(8,"label",10),t._uU(9," C\xf3digo del produto: "),t._UZ(10,"input",13),t.qZA(),t.TgZ(11,"label",10),t._uU(12," URL del producto: "),t._UZ(13,"input",14),t.qZA(),t.TgZ(14,"label",10),t._uU(15," Precio: "),t._UZ(16,"input",15),t.qZA(),t.TgZ(17,"label",10),t._uU(18," Stock: "),t._UZ(19,"input",16),t.qZA()()()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("formGroup",e.formProduct)}}function v(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"div",2)(1,"button",17),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.addToCart())}),t._uU(2,"Agregar ak carrito"),t.qZA()()}}function Z(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"div",2)(1,"button",18),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.deleteProduct())}),t._uU(2,"Eliminar"),t.qZA(),t.TgZ(3,"button",17),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.updateProduct())}),t._uU(4,"Actualizar"),t.qZA()()}}let b=(()=>{class o{constructor(e,r){this.dataProductsSvs=e,this.authService=r,this.changeList=new t.vpe,this.userRole="user",this.formProduct=new c.cw({}),this.administrador=!1}ngOnInit(){this.formProduct=new c.cw({product:new c.NI(this.infoProduct.product,[c.kI.required]),description:new c.NI(this.infoProduct.description,[c.kI.required]),code:new c.NI(this.infoProduct.code,[c.kI.required]),urlImgProduct:new c.NI(this.infoProduct.urlImgProduct,[c.kI.required]),price:new c.NI(this.infoProduct.price,[c.kI.required]),stock:new c.NI(this.infoProduct.stock,[c.kI.required])}),this.authService.getCookie().subscribe({next:e=>{this.userRole=e.message.role,"admin"==this.userRole&&(this.administrador=!0)},error:e=>console.log(e)})}deleteProduct(){confirm(`\xbfRealmente quer\xe9s borrar el producto: ${this.infoProduct.product}`)&&(this.dataProductsSvs.deleteProduct(this.infoProduct.code).subscribe({next:()=>this.changeList.emit(),error:r=>console.log(r)}),this.changeList.emit())}addToCart(){console.log("Borrando producto con c\xf3digo: "+this.infoProduct.code)}updateProduct(){this.formProduct.get("product")?.errors?.required||this.formProduct.get("description")?.errors?.required||this.formProduct.get("code")?.errors?.required||this.formProduct.get("urlImgProduct")?.errors?.required||this.formProduct.get("price")?.errors?.required||this.formProduct.get("stock")?.errors?.required?alert("Todos los campos deben estar completos"):this.dataProductsSvs.updateProduct(this.infoProduct.code,this.formProduct.value).subscribe({next:()=>this.changeList.emit(),error:e=>console.log(e)})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(l),t.Y36(p.e))},o.\u0275cmp=t.Xpm({type:o,selectors:[["front-card"]],inputs:{infoProduct:"infoProduct"},outputs:{changeList:"changeList"},decls:15,vars:8,consts:[[1,"card","m-3",2,"width","15rem"],[1,"card-img-top",2,"max-height","150px!important","min-height","150px!important",3,"src"],[1,"card-body"],[1,"card-title"],[1,"card-text"],[1,"list-group","list-group-flush"],[1,"list-group-item"],[4,"ngIf"],["class","card-body",4,"ngIf"],["action","",1,"container","d-flex","flex-column",3,"formGroup"],["for",""],["formControlName","product","placeholder","Nombre del producto","type","text"],["formControlName","description","placeholder","descricti\xf3n del producto","type","text"],["formControlName","code","placeholder","C\xf3digo del producto","type","number","readonly",""],["formControlName","urlImgProduct","placeholder","URL de la foto","type","text"],["formControlName","price","placeholder","Precio","type","number"],["formControlName","stock","placeholder","Stock","type","number"],[1,"btn","btn-warning","ms-3",3,"click"],[1,"btn","btn-danger",3,"click"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"img",1),t.TgZ(2,"div",2)(3,"h5",3),t._uU(4),t.qZA(),t.TgZ(5,"p",4),t._uU(6),t.qZA()(),t.TgZ(7,"ul",5)(8,"li",6),t._uU(9),t.qZA(),t.TgZ(10,"li",6),t._uU(11),t.qZA()(),t.YNc(12,C,20,1,"div",7),t.YNc(13,v,3,0,"div",8),t.YNc(14,Z,5,0,"div",8),t.qZA()),2&e&&(t.xp6(1),t.s9C("src",r.infoProduct.urlImgProduct,t.LSH),t.xp6(3),t.Oqu(r.infoProduct.product),t.xp6(2),t.Oqu(r.infoProduct.description),t.xp6(3),t.hij("Precio: U$S ",r.infoProduct.price,""),t.xp6(2),t.hij("Stock: ",r.infoProduct.stock,""),t.xp6(1),t.Q6J("ngIf",r.administrador),t.xp6(1),t.Q6J("ngIf",!r.administrador),t.xp6(1),t.Q6J("ngIf",r.administrador))},dependencies:[c._Y,c.Fj,c.wV,c.JJ,c.JL,c.sg,c.u,d.O5],styles:["input[_ngcontent-%COMP%]{border-radius:5px;margin-top:3px}"]}),o})(),x=(()=>{class o{constructor(e,r){this.authsvc=e,this.productsvc=r,this.formProduct=new c.cw({}),this.changeList=new t.vpe}ngOnInit(){this.formProduct=new c.cw({product:new c.NI("",[c.kI.required]),description:new c.NI("",[c.kI.required]),code:new c.NI("",[c.kI.required]),urlImgProduct:new c.NI("",[c.kI.required]),price:new c.NI("",[c.kI.required]),stock:new c.NI("",[c.kI.required])})}addproduct(){this.formProduct.get("product")?.errors?.required||this.formProduct.get("description")?.errors?.required||this.formProduct.get("code")?.errors?.required||this.formProduct.get("urlImgProduct")?.errors?.required||this.formProduct.get("price")?.errors?.required||this.formProduct.get("stock")?.errors?.required?alert("Todos los campos deben estar completos"):this.productsvc.addProduct(this.formProduct.value).subscribe({next:e=>{0==e.status?(alert(`Producto a\xf1adido correctamente con el id: ${e.message._id}`),this.changeList.emit()):alert(`${e.message}`)},error:e=>console.log(e)})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(p.e),t.Y36(l))},o.\u0275cmp=t.Xpm({type:o,selectors:[["front-form"]],outputs:{changeList:"changeList"},decls:8,vars:1,consts:[["action","",1,"d-flex","flex-column",3,"formGroup"],["formControlName","product","placeholder","Nombre del producto","type","text"],["formControlName","description","placeholder","descricti\xf3n del producto","type","text"],["formControlName","code","placeholder","C\xf3digo del producto","type","number"],["formControlName","urlImgProduct","placeholder","URL de la foto","type","text"],["formControlName","price","placeholder","Precio","type","number"],["formControlName","stock","placeholder","Stock","type","number"],["type","submit","value","Ingresar producto",3,"click"]],template:function(e,r){1&e&&(t.TgZ(0,"form",0),t._UZ(1,"input",1)(2,"input",2)(3,"input",3)(4,"input",4)(5,"input",5)(6,"input",6),t.TgZ(7,"input",7),t.NdJ("click",function(){return r.addproduct()}),t.qZA()()),2&e&&t.Q6J("formGroup",r.formProduct)},dependencies:[c._Y,c.Fj,c.wV,c.JJ,c.JL,c.sg,c.u],styles:["input[_ngcontent-%COMP%]{margin-top:4px;border-radius:5px}"]}),o})();function I(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"front-form",10),t.NdJ("changeList",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.callBakcend())}),t.qZA()}}function T(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"front-card",11),t.NdJ("changeList",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.callBakcend())}),t.qZA()}2&o&&t.Q6J("infoProduct",n.$implicit)}const k=[{path:"",component:(()=>{class o{constructor(e,r,i){this.authService=e,this.router=r,this.productsServices=i,this.showFormAdmin=!1,this.allproducts=[]}ngOnInit(){this.authService.getCookie().subscribe({next:e=>{this.userName=e.message.completeName,this.userImg=e.message.userImg,this.userRole=e.message.role,"admin"==this.userRole&&(this.showFormAdmin=!0)},error:e=>console.log(e)}),this.callBakcend()}callBakcend(){this.productsServices.getProducts().subscribe({next:e=>{this.allproducts=e.message},error:e=>console.log(e)})}close(){this.authService.deleteCookie().subscribe({next:e=>console.log(e),error:e=>console.log(e)}),this.router.navigate(["auth/login"])}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(p.e),t.Y36(a.F0),t.Y36(l))},o.\u0275cmp=t.Xpm({type:o,selectors:[["front-home-page"]],decls:12,vars:4,consts:[[1,"container","mt-5"],[1,"container","d-flex","mb-3"],[1,"card",2,"width","18rem"],["alt","...",1,"card-img-top",3,"src"],[1,"card-body"],[1,"card-title"],["href","#",1,"btn","btn-primary",3,"click"],[3,"changeList",4,"ngIf"],[1,"d-flex","flex-row","flex-wrap"],[3,"infoProduct","changeList",4,"ngFor","ngForOf"],[3,"changeList"],[3,"infoProduct","changeList"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._UZ(3,"img",3),t.TgZ(4,"div",4)(5,"h5",5),t._uU(6),t.qZA(),t.TgZ(7,"a",6),t.NdJ("click",function(){return r.close()}),t._uU(8,"Cerrrar sesi\xf3n"),t.qZA()()()(),t.YNc(9,I,1,0,"front-form",7),t.TgZ(10,"div",8),t.YNc(11,T,1,1,"front-card",9),t.qZA()()),2&e&&(t.xp6(3),t.s9C("src",r.userImg,t.LSH),t.xp6(3),t.hij("Bienvenido ",r.userName,""),t.xp6(3),t.Q6J("ngIf",r.showFormAdmin),t.xp6(2),t.Q6J("ngForOf",r.allproducts))},dependencies:[d.sg,d.O5,b,x]}),o})()},{path:"carrito",component:P}];let F=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[a.Bz.forChild(k),a.Bz]}),o})(),N=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[c.UX,d.ez,F]}),o})()}}]);